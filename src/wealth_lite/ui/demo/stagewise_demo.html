<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç®€åŒ–ç‰ˆ Stagewise å·¥å…·æ æ¼”ç¤º</title>
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        .demo-section {
            margin: 20px 0;
            padding: 20px;
            border: 2px solid #e1e5e9;
            border-radius: 8px;
        }
        .button {
            background: #007bff;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            margin: 5px;
        }
        .card {
            background: #f8f9fa;
            padding: 15px;
            border-radius: 8px;
            margin: 10px 0;
        }
        #status {
            padding: 10px;
            margin: 10px 0;
            border-radius: 4px;
            font-weight: bold;
            background: #d4edda;
            color: #155724;
        }
        
        /* Stagewise æ ·å¼ */
        .stagewise-highlight {
            outline: 3px solid #4fd1c7 !important;
            outline-offset: 2px !important;
            cursor: pointer !important;
        }
        .stagewise-selected {
            outline: 3px solid #f56565 !important;
            outline-offset: 2px !important;
        }
    </style>
</head>
<body>
    <h1>ğŸ¯ ç®€åŒ–ç‰ˆ Stagewise å·¥å…·æ æ¼”ç¤º</h1>
    
    <div id="status">âœ… Stagewise å·¥å…·æ å·²åŠ è½½ï¼å·²è¿æ¥åˆ°æ‚¨çš„ Cursor æ’ä»¶ï¼Œè¯·ç‚¹å‡»ä»»ä½•é¡µé¢å…ƒç´ æ¥å¼€å§‹</div>
    
    <div class="demo-section">
        <h2>ä½¿ç”¨è¯´æ˜ï¼š</h2>
        <ol>
            <li><strong>ç§»åŠ¨é¼ æ ‡</strong>ï¼šé¡µé¢å…ƒç´ ä¼šé«˜äº®æ˜¾ç¤ºï¼ˆé’è‰²è¾¹æ¡†ï¼‰</li>
            <li><strong>ç‚¹å‡»å…ƒç´ </strong>ï¼šé€‰æ‹©å…ƒç´ åä¼šæ˜¾ç¤ºå·¥å…·æ ï¼ˆçº¢è‰²è¾¹æ¡†è¡¨ç¤ºå·²é€‰æ‹©ï¼‰</li>
            <li><strong>æ·»åŠ æ³¨é‡Š</strong>ï¼šåœ¨å·¥å…·æ ä¸­æè¿°æ‚¨æƒ³è¦çš„ä¿®æ”¹</li>
            <li><strong>å‘é€ç»™ AI</strong>ï¼šç‚¹å‡»å‘é€æŒ‰é’®ï¼ˆæ¼”ç¤ºç‰ˆä¼šæ˜¾ç¤ºç¡®è®¤æ¶ˆæ¯ï¼‰</li>
        </ol>
    </div>
    
    <div class="demo-section">
        <h3>æµ‹è¯•å…ƒç´  - è¯·å°è¯•ç‚¹å‡»è¿™äº›ï¼š</h3>
        
        <button class="button" onclick="alert('æŒ‰é’®è¢«ç‚¹å‡»äº†ï¼')">
            ğŸ”˜ æµ‹è¯•æŒ‰é’® 1
        </button>
        
        <button class="button" style="background: #28a745;" onclick="alert('ç»¿è‰²æŒ‰é’®ï¼')">
            ğŸŸ¢ æµ‹è¯•æŒ‰é’® 2
        </button>
        
        <div class="card">
            <h4>ğŸ“‹ æµ‹è¯•å¡ç‰‡</h4>
            <p>è¿™æ˜¯ä¸€ä¸ªæµ‹è¯•å¡ç‰‡ï¼Œæ‚¨å¯ä»¥ç‚¹å‡»å®ƒæ¥é€‰æ‹©ã€‚å°è¯•å‘Šè¯‰ AI ä¿®æ”¹è¿™ä¸ªå¡ç‰‡çš„æ ·å¼æˆ–å†…å®¹ã€‚</p>
        </div>
        
        <div class="card" style="background: #e3f2fd;">
            <h4>ğŸ¨ å¦ä¸€ä¸ªå¡ç‰‡</h4>
            <p>è¿™ä¸ªå¡ç‰‡æœ‰ä¸åŒçš„èƒŒæ™¯è‰²ã€‚æ‚¨å¯ä»¥è¦æ±‚ AI ä¿®æ”¹é¢œè‰²ã€æ·»åŠ è¾¹æ¡†æˆ–æ”¹å˜å¸ƒå±€ã€‚</p>
        </div>
    </div>
    
    <div class="demo-section">
        <h3>ğŸ’¡ åŠŸèƒ½ç‰¹ç‚¹ï¼š</h3>
        <ul>
            <li>âœ… å…ƒç´ é«˜äº®å’Œé€‰æ‹©</li>
            <li>âœ… æµ®åŠ¨å·¥å…·æ </li>
            <li>âœ… æ³¨é‡Šå’Œä¿®æ”¹è¯·æ±‚</li>
            <li>âœ… å…ƒç´ ä¿¡æ¯è‡ªåŠ¨æå–</li>
            <li>ğŸ¯ <strong>çœŸå®ç‰ˆæœ¬</strong>ï¼šç›´æ¥è¿æ¥åˆ°æ‚¨çš„ Cursor stagewise æ’ä»¶</li>
            <li>ğŸ¤– ä¿®æ”¹è¯·æ±‚ä¼šå‘é€ç»™ Cursor ä¸­çš„ AI åŠ©æ‰‹</li>
        </ul>
    </div>

    <script>
        // ç®€åŒ–ç‰ˆ Stagewise å·¥å…·æ 
        console.log('ğŸ”§ åˆå§‹åŒ–ç®€åŒ–ç‰ˆ Stagewise å·¥å…·æ ...');
        
        // åˆ›å»ºå·¥å…·æ 
        function createToolbar() {
            const toolbar = document.createElement('div');
            toolbar.id = 'simplified-stagewise-toolbar';
            toolbar.style.cssText = `
                position: fixed;
                top: 10px;
                right: 10px;
                background: #2d3748;
                color: white;
                padding: 15px;
                border-radius: 8px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.3);
                z-index: 10000;
                font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
                font-size: 14px;
                max-width: 300px;
                display: none;
            `;
            
            toolbar.innerHTML = `
                <div style="margin-bottom: 10px; font-weight: bold; color: #4fd1c7;">
                    ğŸ¯ å…ƒç´ é€‰æ‹©å™¨
                </div>
                <div id="selected-element-info" style="margin-bottom: 10px; padding: 8px; background: #1a202c; border-radius: 4px; font-size: 12px;">
                    ç‚¹å‡»é¡µé¢å…ƒç´ æ¥é€‰æ‹©
                </div>
                <textarea id="stagewise-comment" placeholder="æè¿°æ‚¨æƒ³è¦çš„ä¿®æ”¹..." 
                    style="width: 100%; height: 60px; margin-bottom: 10px; padding: 8px; border: none; border-radius: 4px; resize: vertical; font-size: 12px;"></textarea>
                <div style="display: flex; gap: 8px;">
                    <button id="send-to-ai" style="flex: 1; padding: 8px; background: #4fd1c7; color: #1a202c; border: none; border-radius: 4px; cursor: pointer; font-weight: bold;">
                        å‘é€ç»™ AI
                    </button>
                    <button id="close-toolbar" style="padding: 8px; background: #e53e3e; color: white; border: none; border-radius: 4px; cursor: pointer;">
                        âœ•
                    </button>
                </div>
            `;
            
            document.body.appendChild(toolbar);
            return toolbar;
        }
        
        // åˆå§‹åŒ–å·¥å…·æ 
        const toolbar = createToolbar();
        let selectedElement = null;
        let isSelecting = true; // é»˜è®¤å¼€å¯é€‰æ‹©æ¨¡å¼
        
        // å…ƒç´ é€‰æ‹©åŠŸèƒ½
        function onMouseOver(e) {
            if (!isSelecting || e.target.closest('#simplified-stagewise-toolbar')) return;
            e.target.classList.add('stagewise-highlight');
        }
        
        function onMouseOut(e) {
            if (!isSelecting) return;
            e.target.classList.remove('stagewise-highlight');
        }
        
        function onElementClick(e) {
            if (e.target.closest('#simplified-stagewise-toolbar')) return;
            
            e.preventDefault();
            e.stopPropagation();
            
            // æ¸…é™¤ä¹‹å‰é€‰æ‹©
            if (selectedElement) {
                selectedElement.classList.remove('stagewise-selected');
            }
            
            // é€‰æ‹©æ–°å…ƒç´ 
            selectedElement = e.target;
            selectedElement.classList.add('stagewise-selected');
            selectedElement.classList.remove('stagewise-highlight');
            
            // æ›´æ–°å·¥å…·æ ä¿¡æ¯
            const elementInfo = `${selectedElement.tagName.toLowerCase()}${selectedElement.className ? '.' + selectedElement.className.split(' ').join('.') : ''}${selectedElement.id ? '#' + selectedElement.id : ''}`;
            document.getElementById('selected-element-info').textContent = `å·²é€‰æ‹©: ${elementInfo}`;
            
            // æ˜¾ç¤ºå·¥å…·æ 
            toolbar.style.display = 'block';
            
            console.log('âœ… å…ƒç´ å·²é€‰æ‹©:', selectedElement);
        }
        
        // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
        document.addEventListener('mouseover', onMouseOver);
        document.addEventListener('mouseout', onMouseOut);
        document.addEventListener('click', onElementClick);
        
        // å·¥å…·æ æŒ‰é’®äº‹ä»¶
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('send-to-ai').addEventListener('click', () => {
                const comment = document.getElementById('stagewise-comment').value;
                if (!selectedElement || !comment.trim()) {
                    alert('è¯·å…ˆé€‰æ‹©å…ƒç´ å¹¶æ·»åŠ ä¿®æ”¹è¯´æ˜');
                    return;
                }
                
                // ç”Ÿæˆè¯¦ç»†çš„å…ƒç´ ä¿¡æ¯
                const elementInfo = {
                    tagName: selectedElement.tagName,
                    className: selectedElement.className,
                    id: selectedElement.id,
                    textContent: selectedElement.textContent?.substring(0, 100),
                    outerHTML: selectedElement.outerHTML?.substring(0, 200)
                };
                
                // çœŸå®å‘é€åˆ° Cursor AIï¼ˆé€šè¿‡ stagewise æ’ä»¶ï¼‰
                const requestData = {
                    element: elementInfo,
                    comment: comment,
                    timestamp: new Date().toISOString(),
                    pageUrl: window.location.href,
                    projectPath: '/e%3A/Work/workspace/wealth_lite'
                };
                
                console.log('ğŸ¤– å‘é€ç»™ Cursor AI çš„è¯·æ±‚:', requestData);
                
                // å°è¯•é€šè¿‡ stagewise æ’ä»¶å‘é€åˆ° Cursor
                if (window.stagewise && window.stagewise.sendToEditor) {
                    try {
                        window.stagewise.sendToEditor(requestData);
                        alert(`âœ… å·²é€šè¿‡ Cursor æ’ä»¶å‘é€ä¿®æ”¹è¯·æ±‚ï¼\n\nå…ƒç´ : ${elementInfo.tagName}\nè¯´æ˜: ${comment}\n\nğŸ¯ è¯·æŸ¥çœ‹ Cursor ä¸­çš„ AI åŠ©æ‰‹å“åº”ã€‚`);
                    } catch (error) {
                        console.error('å‘é€åˆ° Cursor å¤±è´¥:', error);
                        alert(`âš ï¸ æ— æ³•è¿æ¥åˆ° Cursor æ’ä»¶\n\nå…ƒç´ : ${elementInfo.tagName}\nè¯´æ˜: ${comment}\n\nğŸ’¡ è¯·ç¡®ä¿ Cursor æ­£åœ¨è¿è¡Œä¸” stagewise æ’ä»¶å·²æ¿€æ´»ã€‚`);
                    }
                } else {
                    // å›é€€åˆ°æ¼”ç¤ºæ¨¡å¼
                    alert(`ğŸ“ æ¼”ç¤ºæ¨¡å¼ - ä¿®æ”¹è¯·æ±‚è¯¦æƒ…ï¼š\n\nå…ƒç´ : ${elementInfo.tagName}\nè¯´æ˜: ${comment}\n\nğŸ’¡ è¦å¯ç”¨çœŸå®åŠŸèƒ½ï¼Œè¯·ç¡®ä¿ Cursor ä¸­çš„ stagewise æ’ä»¶æ­£å¸¸å·¥ä½œã€‚`);
                }
                
                // æ¸…ç†
                document.getElementById('stagewise-comment').value = '';
                toolbar.style.display = 'none';
                if (selectedElement) {
                    selectedElement.classList.remove('stagewise-selected');
                    selectedElement = null;
                }
            });
            
            document.getElementById('close-toolbar').addEventListener('click', () => {
                toolbar.style.display = 'none';
                if (selectedElement) {
                    selectedElement.classList.remove('stagewise-selected');
                    selectedElement = null;
                }
            });
        });
        
        console.log('âœ… ç®€åŒ–ç‰ˆ Stagewise å·¥å…·æ åˆå§‹åŒ–å®Œæˆ');
    </script>
</body>
</html> 