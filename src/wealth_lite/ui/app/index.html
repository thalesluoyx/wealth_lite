<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WealthLite - ‰∏™‰∫∫Ë¥¢ÂØåÁÆ°ÁêÜÁ≥ªÁªü</title>
    <link rel="stylesheet" href="styles/main.css">
    <link rel="stylesheet" href="styles/dashboard.css">
    <link rel="stylesheet" href="styles/transactions.css">
    <!-- Chart.js ËΩªÈáèÂõæË°®Â∫ì -->
    <script src="js/chart.umd.js"></script>
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
    
    <!-- Stagewise Toolbar Integration (Development Only) -->
    <script>
        // Ê£ÄÊµãÊòØÂê¶‰∏∫ÂºÄÂèëÁéØÂ¢ÉÔºàÊú¨Âú∞ÊúçÂä°Âô®Ôºâ
        const isDevelopment = window.location.hostname === 'localhost' || 
                             window.location.hostname === '127.0.0.1' ||
                             window.location.hostname === '';
        
        if (isDevelopment) {
            // Âä®ÊÄÅÂä†ËΩΩ stagewise Â∑•ÂÖ∑Ê†è
            const script = document.createElement('script');
            script.src = 'https://unpkg.com/@stagewise/toolbar@latest/dist/toolbar.min.js';
            script.onload = function() {
                if (window.stagewise) {
                    window.stagewise.initToolbar({
                        plugins: [],
                        enabled: true
                    });
                }
            };
            document.head.appendChild(script);
        }
    </script>
</head>
<body>
    <!-- ‰∏ªÂÆπÂô® -->
    <div class="app-container">
        <!-- È°∂ÈÉ®ÂØºËà™Ê†è -->
        <header class="navbar">
            <div class="nav-left">
                <div class="logo">
                    <i data-lucide="wallet"></i>
                    <span>WealthLite</span>
                </div>
                <nav class="nav-menu">
                    <a href="#dashboard" class="nav-item active">
                        <i data-lucide="home"></i>
                        <span>‰ª™Ë°®Êùø</span>
                    </a>
                    <a href="#transactions" class="nav-item">
                        <i data-lucide="receipt"></i>
                        <span>‰∫§ÊòìËÆ∞ÂΩï</span>
                    </a>
                    <a href="#assets" class="nav-item">
                        <i data-lucide="coins"></i>
                        <span>ËµÑ‰∫ßÁÆ°ÁêÜ</span>
                    </a>
                    <a href="#portfolio" class="nav-item">
                        <i data-lucide="pie-chart"></i>
                        <span>ÊäïËµÑÁªÑÂêà</span>
                    </a>
                </nav>
            </div>
            <div class="nav-right">
                <button class="btn-icon" title="ÊêúÁ¥¢">
                    <i data-lucide="search"></i>
                </button>
                <button class="btn-icon" title="ÈÄöÁü•">
                    <i data-lucide="bell"></i>
                </button>
                <button class="btn-icon" title="ËÆæÁΩÆ">
                    <i data-lucide="settings"></i>
                </button>
                <div class="currency-toggle">
                    <button id="currencyToggle" class="btn-currency">CNY</button>
                </div>
            </div>
        </header>

        <!-- ‰∏ªÂÜÖÂÆπÂå∫Âüü -->
        <main class="main-content">
            <!-- ‰ª™Ë°®ÊùøÈ°µÈù¢ -->
            <div id="dashboard" class="page active">
                <!-- ‰∏ªÂõæË°®Âå∫Âüü -->
                <section class="chart-section">
                    <div class="chart-header">
                        <h2>ËµÑ‰∫ßÊÄªËßà</h2>
                        <div class="time-range">
                            <button class="time-btn active" data-range="7d">7Â§©</button>
                            <button class="time-btn" data-range="1m">1Êúà</button>
                            <button class="time-btn" data-range="3m">3Êúà</button>
                            <button class="time-btn" data-range="1y">1Âπ¥</button>
                        </div>
                    </div>
                    <div class="chart-container">
                        <canvas id="mainChart"></canvas>
                        <!-- Êï∞ÊçÆÊÇ¨ÊµÆÂç°Áâá -->
                        <div class="chart-tooltip" id="chartTooltip">
                            <div class="tooltip-date">4Í∞úÏõî</div>
                            <div class="tooltip-values">
                                <div class="tooltip-item">
                                    <span class="label">ÌòÑÍ∏à</span>
                                    <span class="value">8,435,530Ïõê</span>
                                </div>
                                <div class="tooltip-item">
                                    <span class="label">ÏòàÍ∏à</span>
                                    <span class="value">6,234,560Ïõê</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ÊåÅ‰ªìÊòéÁªÜÂàóË°® -->
                <section class="positions-section">
                    <div class="positions-list-card">
                        <div class="card-header">
                            <h3>ÊåÅ‰ªìÊòéÁªÜ</h3>
                            <div class="card-stats">
                                <span class="badge" id="positionCount">ÂÖ± 0 Á¨îÊåÅ‰ªì</span>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="positions-table">
                                <thead>
                                    <tr>
                                        <th>ËµÑ‰∫ßÂêçÁß∞</th>
                                        <th>ËµÑ‰∫ßÁ±ªÂûã</th>
                                        <th>ÂΩìÂâç‰ª∑ÂÄº</th>
                                        <th>Â∏ÅÁßç</th>
                                        <th>ÊåÅÊúâÂ§©Êï∞</th>
                                        <th>Êìç‰Ωú</th>
                                    </tr>
                                </thead>
                                <tbody id="positionsTableBody">
                                    <!-- ÊåÅ‰ªìËÆ∞ÂΩïÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                                </tbody>
                            </table>
                            <div class="table-empty" id="positionsEmpty" style="display: none;">
                                <div class="empty-icon">
                                    <i data-lucide="wallet"></i>
                                </div>
                                <div class="empty-text">ÊöÇÊó†ÊåÅ‰ªì</div>
                                <div class="empty-subtext">ÂºÄÂßãËÆ∞ÂΩïÊÇ®ÁöÑÁ¨¨‰∏ÄÁ¨î‰∫§ÊòìÊù•Âª∫Á´ãÊåÅ‰ªì</div>
                            </div>
                        </div>
                    </div>
                </section>

                <!-- ÁªüËÆ°Âç°ÁâáÂå∫Âüü -->
                <section class="stats-section">
                    <!-- ÊÄªËµÑ‰∫ßÂç°Áâá -->
                    <div class="total-assets-card">
                        <div class="card-header">
                            <span class="label">ÊÄªËµÑ‰∫ß‰ª∑ÂÄº</span>
                            <span class="period">‰ªäÊó•</span>
                        </div>
                        <div class="total-amount" id="totalAmount">
                            2,341,270<span class="currency">ÂÖÉ</span>
                        </div>
                        <div class="change-info">
                            <span class="change positive" id="totalChange">+8,750</span>
                            <span class="change-percent positive" id="totalChangePercent">+5.85%</span>
                        </div>
                        <div class="progress-bar">
                            <div class="progress" style="width: 68%"></div>
                        </div>
                    </div>

                    <!-- ÂúÜÁéØÂõæÂç°Áâá -->
                    <div class="chart-card">
                        <h3>Áé∞ÈáëÁ±ªËµÑ‰∫ß</h3>
                        <div class="donut-chart-container">
                            <canvas id="cashChart"></canvas>
                            <div class="chart-center">
                                <div class="center-amount" id="cashAmount">3,234,000</div>
                                <div class="center-label">ÂÖÉ</div>
                            </div>
                        </div>
                    </div>

                    <!-- È•ºÂõæÂç°Áâá -->
                    <div class="chart-card">
                        <h3>Âõ∫ÂÆöÊî∂Áõä</h3>
                        <div class="pie-chart-container">
                            <canvas id="fixedIncomeChart"></canvas>
                            <div class="chart-center">
                                <div class="center-amount" id="fixedAmount">2,436,000</div>
                                <div class="center-label">ÂÖÉ</div>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <!-- ÂÖ∂‰ªñÈ°µÈù¢Âç†‰Ωç -->
            <div id="assets" class="page">
                <h2>ËµÑ‰∫ßÁÆ°ÁêÜ</h2>
                <p>ËµÑ‰∫ßÁÆ°ÁêÜÈ°µÈù¢ÂºÄÂèë‰∏≠...</p>
            </div>

            <!-- ‰∫§ÊòìËÆ∞ÂΩïÈ°µÈù¢ -->
            <div id="transactions" class="page">
                <div class="page-header">
                    <h2>üìã ‰∫§ÊòìËÆ∞ÂΩï</h2>
                    <div class="page-actions">
                        <button class="btn-primary" id="addTransactionBtn">
                            <i data-lucide="plus"></i>
                            Êñ∞Â¢û‰∫§Êòì
                        </button>
                    </div>
                </div>

                <!-- ‰∫§ÊòìÁªüËÆ°Âç°Áâá -->
                <section class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i data-lucide="hash"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Êú¨Êúà‰∫§ÊòìÁ¨îÊï∞</div>
                            <div class="stat-value" id="monthlyTransactionCount">156</div>
                            <div class="stat-change positive">+23</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i data-lucide="trending-up"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Êú¨Êúà‰∫§ÊòìÈáëÈ¢ù</div>
                            <div class="stat-value" id="monthlyTransactionAmount">1,234,567</div>
                            <div class="stat-change positive">+15.6%</div>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i data-lucide="dollar-sign"></i>
                        </div>
                        <div class="stat-content">
                            <div class="stat-label">Êú¨ÊúàÊî∂Áõä</div>
                            <div class="stat-value" id="monthlyReturn">23,456</div>
                            <div class="stat-change positive">+12.3%</div>
                        </div>
                    </div>
                </section>

                <!-- Â∑•ÂÖ∑Ê†è -->
                <section class="toolbar-section">
                    <div class="toolbar-card">
                        <div class="toolbar-left">
                            <div class="search-box">
                                <i data-lucide="search"></i>
                                <input type="text" placeholder="ÊêúÁ¥¢‰∫§ÊòìËÆ∞ÂΩï..." id="transactionSearch">
                            </div>
                            <div class="filter-group">
                                <select id="transactionTypeFilter" class="filter-select">
                                    <option value="">ÊâÄÊúâÁ±ªÂûã</option>
                                    <option value="DEPOSIT">Â≠òÂÖ•</option>
                                    <option value="PURCHASE">Ë¥≠‰π∞</option>
                                    <option value="REDEMPTION">ËµéÂõû</option>
                                    <option value="INTEREST">Âà©ÊÅØ</option>
                                </select>
                                <select id="assetFilter" class="filter-select">
                                    <option value="">ÊâÄÊúâËµÑ‰∫ß</option>
                                </select>
                                <div class="date-range">
                                    <input type="date" id="startDate" class="date-input">
                                    <span class="date-separator">Ëá≥</span>
                                    <input type="date" id="endDate" class="date-input">
                                </div>
                            </div>
                        </div>
                        <div class="toolbar-right">
                            <button class="btn-secondary" id="exportBtn">
                                <i data-lucide="download"></i>
                                ÂØºÂá∫
                            </button>
                        </div>
                    </div>
                </section>

                <!-- ‰∫§ÊòìÂàóË°® -->
                <section class="transactions-section">
                    <div class="transactions-card">
                        <div class="card-header">
                            <h3>‰∫§ÊòìËÆ∞ÂΩï</h3>
                            <div class="card-stats">
                                <span class="badge" id="transactionCount">ÂÖ± 0 Á¨î‰∫§Êòì</span>
                            </div>
                        </div>
                        <div class="table-container">
                            <table class="transactions-table">
                                <thead>
                                    <tr>
                                        <th data-sort="date">Êó•Êúü <i data-lucide="chevron-up-down"></i></th>
                                        <th data-sort="asset">ËµÑ‰∫ß</th>
                                        <th data-sort="type">‰∫§ÊòìÁ±ªÂûã</th>
                                        <th data-sort="amount">ÈáëÈ¢ù</th>
                                        <th data-sort="currency">Â∏ÅÁßç</th>
                                        <th>Â§áÊ≥®</th>
                                        <th>Êìç‰Ωú</th>
                                    </tr>
                                </thead>
                                <tbody id="transactionsTableBody">
                                    <!-- ‰∫§ÊòìËÆ∞ÂΩïÂ∞ÜÈÄöËøáJavaScriptÂä®ÊÄÅÂ°´ÂÖÖ -->
                                </tbody>
                            </table>
                            <div class="table-empty" id="transactionsEmpty" style="display: none;">
                                <div class="empty-icon">
                                    <i data-lucide="file-x"></i>
                                </div>
                                <div class="empty-text">ÊöÇÊó†‰∫§ÊòìËÆ∞ÂΩï</div>
                                <div class="empty-subtext">ÁÇπÂáª"Êñ∞Â¢û‰∫§Êòì"ÊåâÈíÆÂºÄÂßãËÆ∞ÂΩïÊÇ®ÁöÑÁ¨¨‰∏ÄÁ¨î‰∫§Êòì</div>
                            </div>
                        </div>
                        <div class="table-pagination" id="transactionsPagination">
                            <div class="pagination-info">
                                ÊòæÁ§∫ <span id="paginationStart">1</span> - <span id="paginationEnd">10</span> 
                                ÂÖ± <span id="paginationTotal">0</span> Êù°ËÆ∞ÂΩï
                            </div>
                            <div class="pagination-controls">
                                <button class="btn-pagination" id="prevPage" disabled>
                                    <i data-lucide="chevron-left"></i>
                                </button>
                                <button class="btn-pagination" id="nextPage" disabled>
                                    <i data-lucide="chevron-right"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <div id="portfolio" class="page">
                <h2>ÊäïËµÑÁªÑÂêà</h2>
                <p>ÊäïËµÑÁªÑÂêàÈ°µÈù¢ÂºÄÂèë‰∏≠...</p>
            </div>
        </main>
    </div>

    <!-- Êñ∞Â¢û‰∫§ÊòìÊ®°ÊÄÅÁ™óÂè£ -->
    <div id="addTransactionModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Êñ∞Â¢û‰∫§Êòì</h3>
                <button class="modal-close" id="closeTransactionModal">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <form id="addTransactionForm" class="modal-body">
                <!-- ËµÑ‰∫ßÈÄâÊã©Âô® -->
                <div class="form-group">
                    <label for="assetSelect" class="form-label">ÈÄâÊã©ËµÑ‰∫ß *</label>
                    <div class="asset-selector">
                        <select id="assetSelect" class="form-select" required>
                            <option value="">ËØ∑ÈÄâÊã©ËµÑ‰∫ß...</option>
                        </select>
                        <button type="button" class="btn-link" id="createAssetBtn">
                            <i data-lucide="plus"></i>
                            ÂàõÂª∫Êñ∞ËµÑ‰∫ß
                        </button>
                    </div>
                    <!-- ËµÑ‰∫ßÁ±ªÂûãÊòæÁ§∫ -->
                    <div class="asset-type-display" id="assetTypeDisplay" style="display: none;">
                        <span class="asset-type-label">ËµÑ‰∫ßÁ±ªÂûãÔºö</span>
                        <span class="asset-type-value" id="assetTypeValue">-</span>
                    </div>
                </div>

                <!-- ‰∫§ÊòìÁ±ªÂûã -->
                <div class="form-group">
                    <label for="transactionType" class="form-label">‰∫§ÊòìÁ±ªÂûã *</label>
                    <select id="transactionType" class="form-select" required>
                        <option value="">ËØ∑ÈÄâÊã©‰∫§ÊòìÁ±ªÂûã...</option>
                        <option value="DEPOSIT">Â≠òÂÖ•</option>
                        <option value="WITHDRAW">ÊèêÂèñ</option>
                        <option value="INTEREST">Âà©ÊÅØ</option>
                    </select>
                </div>

                <!-- ‰∫§ÊòìÈáëÈ¢ùÂíåÂ∏ÅÁßç -->
                <div class="form-row">
                    <div class="form-group">
                        <label for="transactionAmount" class="form-label">‰∫§ÊòìÈáëÈ¢ù *</label>
                        <input type="number" id="transactionAmount" class="form-input" 
                               step="0.01" min="0" placeholder="0.00" required>
                    </div>
                    <div class="form-group">
                        <label for="transactionCurrency" class="form-label">Â∏ÅÁßç *</label>
                        <select id="transactionCurrency" class="form-select" required>
                            <option value="CNY">CNY - ‰∫∫Ê∞ëÂ∏Å</option>
                            <option value="USD">USD - ÁæéÂÖÉ</option>
                            <option value="HKD">HKD - Ê∏ØÂ∏Å</option>
                            <option value="EUR">EUR - Ê¨ßÂÖÉ</option>
                        </select>
                    </div>
                </div>

                <!-- ‰∫§ÊòìÊó•Êúü -->
                <div class="form-group">
                    <label for="transactionDate" class="form-label">‰∫§ÊòìÊó•Êúü *</label>
                    <input type="date" id="transactionDate" name="transaction_date" class="form-input" required>
                </div>

                <!-- Ê±áÁéá (ÈùûÂü∫Á°ÄË¥ßÂ∏ÅÊó∂ÊòæÁ§∫) -->
                <div class="form-group" id="exchangeRateGroup" style="display: none;">
                    <label for="exchangeRate" class="form-label">Ê±áÁéá (1 Â§ñÂ∏Å = ? CNY)</label>
                    <input type="number" id="exchangeRate" class="form-input" 
                           step="0.0001" min="0" placeholder="0.0000">
                    <div class="form-help">
                        ËØ∑ËæìÂÖ•‰∫§ÊòìÊó∂ÁöÑÂÆûÈôÖÊ±áÁéáÔºåÂ¶Ç‰∏çÂ°´ÂÜôÂ∞Ü‰ΩøÁî®Á≥ªÁªüÈªòËÆ§Ê±áÁéá
                    </div>
                </div>

                <!-- Â§áÊ≥® -->
                <div class="form-group">
                    <label for="transactionNotes" class="form-label">Â§áÊ≥®</label>
                    <textarea id="transactionNotes" class="form-textarea" 
                              placeholder="‰∫§ÊòìÂ§áÊ≥®‰ø°ÊÅØ..." rows="3"></textarea>
                </div>
            </form>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="cancelTransactionBtn">ÂèñÊ∂à</button>
                <button type="submit" class="btn-primary" form="addTransactionForm">‰øùÂ≠ò‰∫§Êòì</button>
            </div>
        </div>
    </div>

    <!-- Êñ∞Â¢ûËµÑ‰∫ßÊ®°ÊÄÅÁ™óÂè£ -->
    <div id="addAssetModal" class="modal">
        <div class="modal-content modal-small">
            <div class="modal-header">
                <h3>ÂàõÂª∫Êñ∞ËµÑ‰∫ß</h3>
                <button class="modal-close" id="closeAssetModal">
                    <i data-lucide="x"></i>
                </button>
            </div>
            <form id="addAssetForm" class="modal-body">
                <!-- ËµÑ‰∫ßÂêçÁß∞ -->
                <div class="form-group">
                    <label for="assetName" class="form-label">ËµÑ‰∫ßÂêçÁß∞ *</label>
                    <input type="text" id="assetName" class="form-input" 
                           placeholder="‰æãÂ¶ÇÔºöÊãõÂïÜÈì∂Ë°åÂÇ®ËìÑË¥¶Êà∑" required>
                </div>

                <!-- ËµÑ‰∫ßÁ±ªÂûã -->
                <div class="form-group">
                    <label for="assetType" class="form-label">ËµÑ‰∫ßÁ±ªÂûã *</label>
                    <select id="assetType" class="form-select" required>
                        <option value="">ËØ∑ÈÄâÊã©ËµÑ‰∫ßÁ±ªÂûã...</option>
                        <option value="CASH">Áé∞ÈáëÂèäÁ≠â‰ª∑Áâ©</option>
                        <option value="FIXED_INCOME">Âõ∫ÂÆöÊî∂Áõä</option>
                        <option value="EQUITY">ÊùÉÁõäÁ±ª</option>
                        <option value="ALTERNATIVE">Âè¶Á±ªÊäïËµÑ</option>
                    </select>
                </div>

                <!-- Â∏ÅÁßç -->
                <div class="form-group">
                    <label for="assetCurrency" class="form-label">Â∏ÅÁßç *</label>
                    <select id="assetCurrency" class="form-select" required>
                        <option value="CNY">CNY - ‰∫∫Ê∞ëÂ∏Å</option>
                        <option value="USD">USD - ÁæéÂÖÉ</option>
                        <option value="HKD">HKD - Ê∏ØÂ∏Å</option>
                        <option value="EUR">EUR - Ê¨ßÂÖÉ</option>
                    </select>
                </div>

                <!-- ÊèèËø∞ -->
                <div class="form-group">
                    <label for="assetDescription" class="form-label">ÊèèËø∞</label>
                    <textarea id="assetDescription" class="form-textarea" 
                              placeholder="ËµÑ‰∫ßÊèèËø∞‰ø°ÊÅØ..." rows="2"></textarea>
                </div>
            </form>
            <div class="modal-footer">
                <button type="button" class="btn-secondary" id="cancelAssetBtn">ÂèñÊ∂à</button>
                <button type="submit" class="btn-primary" form="addAssetForm">ÂàõÂª∫ËµÑ‰∫ß</button>
            </div>
        </div>
    </div>



    <!-- JavaScript -->
    <!-- Âõ∫ÂÆöÊî∂Áõä‰∫ßÂìÅÊ®°Âùó (ÈúÄË¶ÅÂú®transactions.js‰πãÂâçÂä†ËΩΩ) -->
    <script src="js/components/fixed-income-manager.js"></script>
    
    <script src="js/transactions.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/main.js"></script>
    
    <!-- ÂºÄÂèëÂ∑•ÂÖ∑ (‰ªÖÂú®ÂºÄÂèëÁéØÂ¢ÉÂä†ËΩΩ) -->
    <script>
        // Ê£ÄÊµãÊòØÂê¶‰∏∫ÂºÄÂèëÁéØÂ¢ÉÂπ∂Âä†ËΩΩÂºÄÂèëÂ∑•ÂÖ∑
        (function() {
            const isDevEnv = window.location.hostname === 'localhost' || 
                            window.location.hostname === '127.0.0.1' ||
                            window.location.hostname === '';
            
            if (isDevEnv) {
                // Âä®ÊÄÅÂä†ËΩΩ Stagewise ÂºÄÂèëÂ∑•ÂÖ∑
                const script = document.createElement('script');
                script.src = 'dev-tools/stagewise-toolbar.js';
                script.onload = () => {
                    console.log('üéØ Stagewise ÂºÄÂèëÂ∑•ÂÖ∑Â∑≤Âä†ËΩΩ');
                };
                document.head.appendChild(script);
            }
        })();
    </script>
</body>
</html> 